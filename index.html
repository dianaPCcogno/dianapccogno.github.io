<style type='text/css'>

 .embeddedServiceHelpButton .helpButton .uiButton {

       background-color: #262626;
       font-family: "Arial", sans-serif;
 }

 .embeddedServiceHelpButton .helpButton .uiButton:focus {
       outline: 1px solid #262626;
 }

</style>

 
<script type='text/javascript' src='https://service.force.com/embeddedservice/5.0/esw.min.js'></script>

<script>

function parseName(input) {
       var fullName = input || "";
       var result = {};

       if (fullName.length > 0) {
           var nameTokens = fullName.split(' ')

           if (nameTokens.length > 3) {
               result.name = nameTokens.slice(0, 2).join(' ');
           } else {
               result.name = nameTokens.slice(0, 1).join(' ');
           }

           if (nameTokens.length > 2) {
               result.lastName = nameTokens.slice(-2, -1).join(' ');
               result.secondLastName = nameTokens.slice(-1).join(' ');
           } else {
               result.lastName = nameTokens.slice(-1).join(' ');
               result.secondLastName = "";
           }
       }

       return result;
   }

 var initESW = function(gslbBaseURL) {
      embedded_svc.settings.displayHelpButton = true; //Or false
      embedded_svc.settings.language = 'es-MX'; //For example, enter 'en' or 'en-US'
  
      embedded_svc.settings.defaultMinimizedText = 'BSD Office Depot Chat'; //(Defaults to Chat with an Expert)
      embedded_svc.settings.disabledMinimizedText = 'Dejanos un mensaje...'; //(Defaults to Agent Offline)
  
      embedded_svc.settings.loadingText = 'Cargando...'; //(Defaults to Loading)
      //embedded_svc.settings.storageDomain = 'yourdomain.com'; //(Sets the domain for your deployment so that visitors can navigate subdomains during a chat session)
  
      // Settings for Chat
      //embedded_svc.settings.directToButtonRouting = function(prechatFormData) {
                     // Dynamically changes the button ID based on what the visitor enters in the pre-chat form.
                     // Returns a valid button ID.
      //};
      
      var name = $('#nombreDelUsuario').val();
      var email = $('#emailDelUsuario').val();
      var result =null;
      
      if(typeof name === 'undefined')
       name ='';
      else
       result = parseName(name);
      if(typeof email === 'undefined')
       email = '';
      
      if(result === null){
       result = {};
       result.name ='';
       result.lastName='';
       result.secondLastName = '';
      }
   
      embedded_svc.settings.prepopulatedPrechatFields = {
       FirstName: result.name,
          LastName: result.lastName + ' '+result.secondLastName,
          Email: email,      ///Ejemplo debe sustituirse en operacion solo cuando se encuentra logeado un usuario.
      }; //Sets the auto-population of pre-chat form fields
   
      //embedded_svc.settings.fallbackRouting = []; //An array of button IDs, user IDs, or userId_buttonId
      //embedded_svc.settings.offlineSupportMinimizedText = '...'; //(Defaults to Contact Us)
   
   embedded_svc.settings.extraPrechatFormDetails = [{
                 "label": "Source URL",
                 "value": window.location.href,
                 "displayToAgent": true,
                 "transcriptFields" : ["bgo_urlOrigen__c"]
             }
             ];
  
      embedded_svc.settings.enabledFeatures = ['LiveAgent'];
      embedded_svc.settings.entryFeature = 'LiveAgent';
  
         embedded_svc.init(
            'https://officedepotmx.my.salesforce.com',
			'https://officedepotmx.my.site.com/',
            gslbBaseURL,
            '00D300000007AEB',
            'bgo_bsd_officedepot',

            {

                baseLiveAgentContentURL: 'https://c.la1-c1-ia2.salesforceliveagent.com/content',
                deploymentId: '5721E000000KzHP',
                buttonId: '5731E0000004DRE',
                baseLiveAgentURL: 'https://d.la1-c1-ia2.salesforceliveagent.com/chat',
                eswLiveAgentDevName: 'EmbeddedServiceLiveAgent_Parent04I1E000000CaRbUAK_17ba7a9c20d',
                isOfflineSupportEnabled: true
            }
        );
       };

    if (!window.embedded_svc) {
      var s = document.createElement('script');
      s.setAttribute('src', 'https://officedepotmx.my.salesforce.com/embeddedservice/5.0/esw.min.js');
      s.onload = function() {
                     initESW(null);
      };
      document.body.appendChild(s);
    } else {
      initESW('https://service.force.com');
    }

    </script>
